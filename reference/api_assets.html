<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Serve resources from your file system — api_assets • plumber2</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Schibsted_Grotesk-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/National_Park-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Serve resources from your file system — api_assets"><meta name="description" content="plumber2 provides two ways to serve files from your server. One
(api_assets) goes through R and gives you all the power you expect to
further modify and work with the response. The other (api_statics) never hits
the R process and as a result is blazing fast. However this comes with the
price of very limited freedom to modify the response or even do basic
authentication. Each has their place."><meta property="og:description" content="plumber2 provides two ways to serve files from your server. One
(api_assets) goes through R and gives you all the power you expect to
further modify and work with the response. The other (api_statics) never hits
the R process and as a result is blazing fast. However this comes with the
price of very limited freedom to modify the response or even do basic
authentication. Each has their place."><meta property="og:image" content="https://plumber2.posit.co/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">plumber2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/plumber.html">Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-learn-plumber-" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Learn plumber2</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-learn-plumber-"><li><a class="dropdown-item" href="../articles/introduction.html">1. Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/routing-and-input.html">2. Routing &amp; Input</a></li>
    <li><a class="dropdown-item" href="../articles/rendering-output.html">3. Rendering output</a></li>
    <li><a class="dropdown-item" href="../articles/execution-model.html">4. Runtime</a></li>
    <li><a class="dropdown-item" href="../articles/hosting.html">5. Hosting</a></li>
    <li><a class="dropdown-item" href="../articles/programmatic-usage.html">6. Programmatic usage</a></li>
    <li><a class="dropdown-item" href="../articles/annotations.html">7. Annotation Reference</a></li>
    <li><a class="dropdown-item" href="../articles/security.html">8. Security</a></li>
    <li><a class="dropdown-item" href="../articles/tips-and-tricks.html">9. Tips &amp; Tricks</a></li>
    <li><a class="dropdown-item" href="../articles/migration.html">10. Migration</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-advanced" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Advanced</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-advanced"><li><a class="dropdown-item" href="../articles/extending.html">Extending plumber2</a></li>
    <li><a class="dropdown-item" href="../articles/server_yml.html">The _server.yml standard</a></li>
    <li><a class="dropdown-item" href="../articles/otel.html">OpenTelemetry instrumentation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/posit-dev/plumber2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Serve resources from your file system</h1>
      <small class="dont-index">Source: <a href="https://github.com/posit-dev/plumber2/blob/main/R/api_assets.R" class="external-link"><code>R/api_assets.R</code></a></small>
      <div class="d-none name"><code>api_assets.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>plumber2 provides two ways to serve files from your server. One
(<code>api_assets</code>) goes through R and gives you all the power you expect to
further modify and work with the response. The other (api_statics) never hits
the R process and as a result is blazing fast. However this comes with the
price of very limited freedom to modify the response or even do basic
authentication. Each has their place.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">api_assets</span><span class="op">(</span></span>
<span>  <span class="va">api</span>,</span>
<span>  <span class="va">at</span>,</span>
<span>  <span class="va">path</span>,</span>
<span>  default_file <span class="op">=</span> <span class="st">"index.html"</span>,</span>
<span>  default_ext <span class="op">=</span> <span class="st">"html"</span>,</span>
<span>  finalize <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  continue <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  auth_flow <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  auth_scope <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  route <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">api_statics</span><span class="op">(</span></span>
<span>  <span class="va">api</span>,</span>
<span>  <span class="va">at</span>,</span>
<span>  <span class="va">path</span>,</span>
<span>  use_index <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  fallthrough <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  html_charset <span class="op">=</span> <span class="st">"utf-8"</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  validation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  except <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-api">api<a class="anchor" aria-label="anchor" href="#arg-api"></a></dt>
<dd><p>A plumber2 api object to add the rossource serving to</p></dd>


<dt id="arg-at">at<a class="anchor" aria-label="anchor" href="#arg-at"></a></dt>
<dd><p>The path to serve the resources from</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>The location on the file system to map <code>at</code> to</p></dd>


<dt id="arg-default-file">default_file<a class="anchor" aria-label="anchor" href="#arg-default-file"></a></dt>
<dd><p>The default file to look for if the path does not map to
a file directly (see Details)</p></dd>


<dt id="arg-default-ext">default_ext<a class="anchor" aria-label="anchor" href="#arg-default-ext"></a></dt>
<dd><p>The default file extension to add to the file if a file
cannot be found at the provided path and the path does not have an extension
(see Details)</p></dd>


<dt id="arg-finalize">finalize<a class="anchor" aria-label="anchor" href="#arg-finalize"></a></dt>
<dd><p>An optional function to run if a file is found. The function
will receive the request as the first argument, the response as the second,
and anything passed on through <code>...</code> in the <code>dispatch</code> method. Any return
value from the function is discarded. The function must accept <code>...</code></p></dd>


<dt id="arg-continue">continue<a class="anchor" aria-label="anchor" href="#arg-continue"></a></dt>
<dd><p>A logical that should be returned if a file is found.
Defaults to <code>FALSE</code> indicating that the response should be send unmodified.</p></dd>


<dt id="arg-auth-flow">auth_flow<a class="anchor" aria-label="anchor" href="#arg-auth-flow"></a></dt>
<dd><p>A logical expression giving the authentication flow the
client must pass to get access to the resource.</p></dd>


<dt id="arg-auth-scope">auth_scope<a class="anchor" aria-label="anchor" href="#arg-auth-scope"></a></dt>
<dd><p>The scope requirements of the resource</p></dd>


<dt id="arg-route">route<a class="anchor" aria-label="anchor" href="#arg-route"></a></dt>
<dd><p>The name of the route in the header router to add the asset
route to. Defaults to the last route in the stack. If the route does not
exist it will be created as the last route in the stack</p></dd>


<dt id="arg-use-index">use_index<a class="anchor" aria-label="anchor" href="#arg-use-index"></a></dt>
<dd><p>Should an <code>index.html</code> file be served if present when a
client requests the folder</p></dd>


<dt id="arg-fallthrough">fallthrough<a class="anchor" aria-label="anchor" href="#arg-fallthrough"></a></dt>
<dd><p>Should requests that doesn't match a file enter the
request loop or have a 404 response send directly</p></dd>


<dt id="arg-html-charset">html_charset<a class="anchor" aria-label="anchor" href="#arg-html-charset"></a></dt>
<dd><p>The charset to report when serving html files</p></dd>


<dt id="arg-headers">headers<a class="anchor" aria-label="anchor" href="#arg-headers"></a></dt>
<dd><p>A list of headers to add to the response. Will be combined
with the global headers of the app</p></dd>


<dt id="arg-validation">validation<a class="anchor" aria-label="anchor" href="#arg-validation"></a></dt>
<dd><p>An optional validation pattern. Presently, the only type of
validation supported is an exact string match of a header. For example, if
<code>validation</code> is <code>'"abc" = "xyz"'</code>, then HTTP requests must have a
header named <code>abc</code> (case-insensitive) with the value <code>xyz</code>
(case-sensitive). If a request does not have a matching header, than httpuv
will give a 403 Forbidden response. If the <code>character(0)</code> (the
default), then no validation check will be performed.</p></dd>


<dt id="arg-except">except<a class="anchor" aria-label="anchor" href="#arg-except"></a></dt>
<dd><p>One or more url paths that should be excluded from the route.
Requests matching these will enter the standard router dispatch. The paths
are interpreted as subpaths to <code>at</code>, e.g. the final path to exclude will be
<code>at</code>+<code>exclude</code> (see example)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>These functions return the <code>api</code> object allowing for easy chaining
with the pipe</p>
    </div>
    <div class="section level2">
    <h2 id="using-annotation">Using annotation<a class="anchor" aria-label="anchor" href="#using-annotation"></a></h2>
    <p>When using annotated route files the functionality of <code>api_assets()</code> can be
achieved like this:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">#* @assets my_wd/ ./</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="cn">NULL</span></span></code></pre><p></p></div>
<p>When using annotated route files the functionality of <code>api_statics()</code> can be
achieved like this:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">#* @statics my_docs/ ~/</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co">#* @except my_secret_folder/</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="cn">NULL</span></span></code></pre><p></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Add asset serving through routr route</span></span></span>
<span class="r-in"><span><span class="fu"><a href="api.html">api</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">api_assets</span><span class="op">(</span><span class="st">"my_wd/"</span>, <span class="st">"./"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Creating <span style="color: #00BB00;">default</span> route in header router</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ── A plumber server ────────────────────────────────────────────────────────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Serving on http://127.0.0.1:8080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Currently <span style="color: #BB0000;">not running</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add asset serving directly</span></span></span>
<span class="r-in"><span><span class="fu"><a href="api.html">api</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">api_statics</span><span class="op">(</span><span class="st">"my_docs"</span>, <span class="st">"~/"</span>, except <span class="op">=</span> <span class="st">"my_secret_folder/"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ── A plumber server ────────────────────────────────────────────────────────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Serving on http://127.0.0.1:8080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Currently <span style="color: #BB0000;">not running</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas Lin Pedersen, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

