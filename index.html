<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Easy and Powerful Webservers in R • plumber2</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Easy and Powerful Webservers in R">
<meta name="description" content="Automatically create a webserver from annotated R files or by building it up programmatically. Provides automatic OpenAPI documentation, input handling, async support, and middleware support.">
<meta property="og:description" content="Automatically create a webserver from annotated R files or by building it up programmatically. Provides automatic OpenAPI documentation, input handling, async support, and middleware support.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">plumber2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/plumber.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-learn-plumber-" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Learn plumber2</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-learn-plumber-">
<li><a class="dropdown-item" href="articles/introduction.html">1. Introduction</a></li>
    <li><a class="dropdown-item" href="articles/routing-and-input.html">2. Routing &amp; Input</a></li>
    <li><a class="dropdown-item" href="articles/rendering-output.html">3. Rendering output</a></li>
    <li><a class="dropdown-item" href="articles/execution-model.html">4. Runtime</a></li>
    <li><a class="dropdown-item" href="articles/hosting.html">5. Hosting</a></li>
    <li><a class="dropdown-item" href="articles/programmatic-usage.html">6. Programmatic usage</a></li>
    <li><a class="dropdown-item" href="articles/annotations.html">7. Annotation Reference</a></li>
    <li><a class="dropdown-item" href="articles/security.html">8. Security</a></li>
    <li><a class="dropdown-item" href="articles/tips-and-tricks.html">9. Tips &amp; Tricks</a></li>
    <li><a class="dropdown-item" href="articles/migration.html">10. Migration</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/posit-dev/plumber2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="plumber2">plumber2<a class="anchor" aria-label="anchor" href="#plumber2"></a>
</h1></div>
<!-- badges: start -->

<p>This is a complete rewrite of <a href="https://www.rplumber.io" class="external-link">plumber</a>. The purpose of the rewrite is to take everything we’ve learned from plumber, shed the bad decision that you inevitably make over the course of development, and start from scratch.</p>
<p>You’ll find that plumber2 is very similar to plumber in a lot of ways, but diverts in key areas, resulting in API incompatibility between the two packages. Because of this you may need to update your plumber APIs if switching to plumber2.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>plumber2 is still a work in progress, and it is recommended to only use it to experiment and get familiarity with the future direction of plumber APIs. If you wish to try it out you can install the development version from GitHub using <a href="https://pak.r-lib.org" class="external-link">pak</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"posit-dev/plumber2"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="feedback">Feedback<a class="anchor" aria-label="anchor" href="#feedback"></a>
</h2>
<p>At this point in the development feedback is crucial. If you do decide to try out plumber2, please share your experience, both good and bad, and ask questions as it informs us about where to spend more time with documentation.</p>
</div>
<div class="section level2">
<h2 id="hello-world">Hello World<a class="anchor" aria-label="anchor" href="#hello-world"></a>
</h2>
<p>Below is a simple “hello world” API written for plumber2 that illustrates some of the differences from plumber:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#* Echo the parameter that was sent in</span></span>
<span><span class="co">#*</span></span>
<span><span class="co">#* @get /echo/&lt;msg&gt;</span></span>
<span><span class="co">#*</span></span>
<span><span class="co">#* @param msg:string The message to echo back.</span></span>
<span><span class="co">#*</span></span>
<span><span class="co">#* @response 200:{msg:string} A string containing the input message</span></span>
<span><span class="co">#*</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="va">msg</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    msg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"The message is: '"</span>, <span class="va">msg</span>, <span class="st">"'"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">#* Plot out data from the palmer penguins dataset</span></span>
<span><span class="co">#*</span></span>
<span><span class="co">#* @get /plot</span></span>
<span><span class="co">#*</span></span>
<span><span class="co">#* @query spec:enum|Adelie, Chinstrap, Gentoo| If provided, filter the</span></span>
<span><span class="co">#* data to only this species</span></span>
<span><span class="co">#*</span></span>
<span><span class="co">#* @serializer png{width = 700, height = 500}</span></span>
<span><span class="co">#* @serializer jpeg{width = 700, height = 500}</span></span>
<span><span class="co">#*</span></span>
<span><span class="co">#* @async</span></span>
<span><span class="kw">function</span><span class="op">(</span><span class="va">query</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">myData</span> <span class="op">&lt;-</span> <span class="fu">palmerpenguins</span><span class="fu">::</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/reference/penguins.html" class="external-link">penguins</a></span></span>
<span>  <span class="va">title</span> <span class="op">&lt;-</span> <span class="st">"All Species"</span></span>
<span></span>
<span>  <span class="co"># Filter if the species was specified</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">query</span><span class="op">$</span><span class="va">spec</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Only the '"</span>, <span class="va">query</span><span class="op">$</span><span class="va">spec</span>, <span class="st">"' Species"</span><span class="op">)</span></span>
<span>    <span class="va">myData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">myData</span>, <span class="va">species</span> <span class="op">==</span> <span class="va">query</span><span class="op">$</span><span class="va">spec</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">myData</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://reqres.data-imaginist.com/reference/abort_http_problem.html" class="external-link">abort_internal_error</a></span><span class="op">(</span><span class="st">"Missing data for {query$spec}"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="va">myData</span><span class="op">$</span><span class="va">flipper_length_mm</span>,</span>
<span>    <span class="va">myData</span><span class="op">$</span><span class="va">bill_length_mm</span>,</span>
<span>    main<span class="op">=</span><span class="va">title</span>,</span>
<span>    xlab<span class="op">=</span><span class="st">"Flipper Length (mm)"</span>,</span>
<span>    ylab<span class="op">=</span><span class="st">"Bill Length (mm)"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Above you can both see some breaking changes and some new features in action. The biggest breaking change is that parameters coming from the path, the query string, and the body are now clearly separated. Only parameters from the path are provided as direct arguments to the handler function. Query and body parameters are accessible through the <code>query</code> and <code>body</code> argument respectively. As can be seen above they also use different tags in the documentation.</p>
<p>Speaking of documentation, the parsing of plumber blocks have been greatly improved. It is now built upon roxygen2, so it follows that convention, allowing multiline tags and defaulting to the first line as title and proceeding untagged lines as description. The ability to define input and output types has also been greatly expanded, adding the ability to define nested objects, adding default values and (as seen above) define enum (factors) to name a few. All input will get type checked and default value imputed if missing.</p>
<p>For the <code>/plot</code> handler you can also see that it specifies multiple serializers. Doing so will allow the client to request its preferred response format using the <code>Accept</code> header. Plumber2 will then perform content negotiation to figure out the best response format based on what it supports and what the client prefers.</p>
<p>Lastly, you can see a new tag (one of many) in the <code>/plot</code> handler. <code>@async</code> allows you to convert your handler into an async handler automatically. It is still possible to create an async handler manually by returning a promise, but the new tag significantly simplifies this for the most classic cases. There is still overhead involved in handling requests asynchronously so this is mainly a good idea for longer running handlers, but it is shown here as an example.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/posit-dev/plumber2/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/posit-dev/plumber2/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing plumber2</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Thomas Lin Pedersen <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5147-4711" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/posit-dev/plumber2/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/posit-dev/plumber2/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/posit-dev/plumber2" class="external-link"><img src="https://codecov.io/gh/posit-dev/plumber2/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas Lin Pedersen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
